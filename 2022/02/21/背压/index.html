<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"iulay1007.github.io","root":"/","scheme":"Muse","version":"8.0.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"avatar":null,"url":"/images/header.png","rounded":true,"rotated":false},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="FlowControl(流控)简介在RxJava中，遇到这样一种情况并不困难:Observable发出条目的速度比操作符或订阅者消费它们的速度要快。这就提出了一个问题，即如何处理这种不断增长的未消耗项目的积压。">
<meta property="og:type" content="article">
<meta property="og:title" content="RxJava的流控">
<meta property="og:url" content="https://iulay1007.github.io/2022/02/21/%E8%83%8C%E5%8E%8B/index.html">
<meta property="og:site_name" content="SY">
<meta property="og:description" content="FlowControl(流控)简介在RxJava中，遇到这样一种情况并不困难:Observable发出条目的速度比操作符或订阅者消费它们的速度要快。这就提出了一个问题，即如何处理这种不断增长的未消耗项目的积压。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.bursty.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.sample.png">
<meta property="og:image" content="https://i.loli.net/2021/12/02/Bgmqktl45AzpcDQ.jpg">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.throttleFirst.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.debounce.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/04/EVwy6b9xDN7Qgnr.jpg">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.buffer2.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.buffer1.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.window1.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.window2.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.buffer.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/05/jmyGbUSJdN5fszP.jpg">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.drop.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/05/RaCpeDNqQ3Z9wis.jpg">
<meta property="og:image" content="http://zhangtielei.com/assets/photos_rxjava/backpressure/bp.obp.latest.png">
<meta property="og:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.block.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/05/Wo9caksqSJGOxTz.jpg">
<meta property="article:published_time" content="2022-02-21T11:14:30.836Z">
<meta property="article:modified_time" content="2022-02-21T11:30:34.126Z">
<meta property="article:author" content="sy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.bursty.png">


<link rel="canonical" href="https://iulay1007.github.io/2022/02/21/%E8%83%8C%E5%8E%8B/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>RxJava的流控 | SY</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">SY</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">qwq</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#FlowControl-%E6%B5%81%E6%8E%A7"><span class="nav-number">1.</span> <span class="nav-text">FlowControl(流控)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hot-and-cold-Observables-and-multicasted-Observables"><span class="nav-number">1.2.</span> <span class="nav-text">Hot and cold Observables, and multicasted Observables</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Backpressure"><span class="nav-number">2.</span> <span class="nav-text">Backpressure</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BB%A3%E6%9B%BF%E5%8F%8D%E5%8E%8B"><span class="nav-number">3.</span> <span class="nav-text">使用一些操作符代替反压</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8A%82%E6%B5%81"><span class="nav-number">3.0.1.</span> <span class="nav-text">节流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="nav-number">3.0.1.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sample-or-throttleLast"><span class="nav-number">3.0.1.2.</span> <span class="nav-text">sample (or throttleLast)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">3.0.1.2.1.</span> <span class="nav-text">使用方法：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3"><span class="nav-number">3.0.1.2.2.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA%EF%BC%9A"><span class="nav-number">3.0.1.2.3.</span> <span class="nav-text">图示：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#throttleFirst"><span class="nav-number">3.0.1.3.</span> <span class="nav-text">throttleFirst</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.0.1.3.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-1"><span class="nav-number">3.0.1.3.2.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA"><span class="nav-number">3.0.1.3.3.</span> <span class="nav-text">图示</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#debounce-or-throttleWithTimeout"><span class="nav-number">3.0.1.4.</span> <span class="nav-text">debounce (or throttleWithTimeout)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="nav-number">3.0.1.4.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-2"><span class="nav-number">3.0.1.4.2.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-1"><span class="nav-number">3.0.1.4.3.</span> <span class="nav-text">图示</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%8F%91%E9%80%81"><span class="nav-number">3.0.2.</span> <span class="nav-text">打包发送</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="nav-number">3.0.2.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#buffer"><span class="nav-number">3.0.2.2.</span> <span class="nav-text">buffer</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-2"><span class="nav-number">3.0.2.2.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-3"><span class="nav-number">3.0.2.2.2.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-2"><span class="nav-number">3.0.2.2.3.</span> <span class="nav-text">图示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BD%BF%E7%94%A8"><span class="nav-number">3.0.2.2.4.</span> <span class="nav-text">进一步使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-3"><span class="nav-number">3.0.2.2.5.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-4"><span class="nav-number">3.0.2.2.6.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-3"><span class="nav-number">3.0.2.2.7.</span> <span class="nav-text">图示</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#window"><span class="nav-number">3.0.2.3.</span> <span class="nav-text">window</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-5"><span class="nav-number">3.0.2.3.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94%E5%86%85%E7%9A%84%E6%B6%88%E6%81%AF%E5%9B%BE%E7%A4%BA"><span class="nav-number">3.0.2.3.2.</span> <span class="nav-text">时间间隔内的消息图示</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-4"><span class="nav-number">3.0.2.3.2.1.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E9%87%8F%E6%B6%88%E6%81%AF%E7%9A%84%E5%9B%BE%E7%A4%BA"><span class="nav-number">3.0.2.3.3.</span> <span class="nav-text">自定义数量消息的图示</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-5"><span class="nav-number">3.0.2.3.3.1.</span> <span class="nav-text">使用方法</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Callstack-blocking"><span class="nav-number">3.0.3.</span> <span class="nav-text">Callstack blocking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Subscriber%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E5%93%8D%E5%BA%94%E5%BC%8F%E8%8E%B7%E5%8F%96%E7%9A%84%E5%8F%8D%E5%8E%8B%E7%AD%96%E7%95%A5"><span class="nav-number">3.0.4.</span> <span class="nav-text">Subscriber如何建立响应式获取的反压策略</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-6"><span class="nav-number">3.0.4.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-6"><span class="nav-number">3.0.4.2.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reactive-pull-backpressure-isn%E2%80%99t-magic"><span class="nav-number">3.0.4.3.</span> <span class="nav-text">Reactive pull backpressure isn’t magic</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#onBackpressureBuffer"><span class="nav-number">3.0.4.3.1.</span> <span class="nav-text">onBackpressureBuffer</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-7"><span class="nav-number">3.0.4.3.1.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-4"><span class="nav-number">3.0.4.3.1.2.</span> <span class="nav-text">图示</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#onBackpressureDrop"><span class="nav-number">3.0.4.3.2.</span> <span class="nav-text">onBackpressureDrop</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-8"><span class="nav-number">3.0.4.3.2.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-5"><span class="nav-number">3.0.4.3.2.2.</span> <span class="nav-text">图示</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#onBackpressureLatest"><span class="nav-number">3.0.4.3.3.</span> <span class="nav-text">onBackpressureLatest</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-9"><span class="nav-number">3.0.4.3.3.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-6"><span class="nav-number">3.0.4.3.3.2.</span> <span class="nav-text">图示</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#onBackpressureBlock"><span class="nav-number">3.0.4.3.4.</span> <span class="nav-text">onBackpressureBlock</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-10"><span class="nav-number">3.0.4.3.4.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9B%BE%E7%A4%BA-7"><span class="nav-number">3.0.4.3.4.2.</span> <span class="nav-text">图示</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flowable"><span class="nav-number">3.1.</span> <span class="nav-text">Flowable</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Observable-%E4%B8%8E-Flowable"><span class="nav-number">3.1.1.</span> <span class="nav-text">Observable 与 Flowable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flowable%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="nav-number">3.1.2.</span> <span class="nav-text">Flowable的创建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84Flowable"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">简单的Flowable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Observable%E5%88%9B%E5%BB%BAFlowable"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">通过Observable创建Flowable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87FlowableOnSubscribe%E5%88%9B%E5%BB%BAFlowable"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">通过FlowableOnSubscribe创建Flowable</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flowable%E7%9A%84Backpressure%E7%AD%96%E7%95%A5"><span class="nav-number">3.2.</span> <span class="nav-text">Flowable的Backpressure策略</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#BackpressureStrategy"><span class="nav-number">3.2.1.</span> <span class="nav-text">BackpressureStrategy</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Buffer"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">Buffer</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-11"><span class="nav-number">3.2.1.1.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-7"><span class="nav-number">3.2.1.1.2.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Drop"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">Drop</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-12"><span class="nav-number">3.2.1.2.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-8"><span class="nav-number">3.2.1.2.2.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Latest"><span class="nav-number">3.2.1.3.</span> <span class="nav-text">Latest</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-13"><span class="nav-number">3.2.1.3.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-9"><span class="nav-number">3.2.1.3.2.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Error"><span class="nav-number">3.2.1.4.</span> <span class="nav-text">Error</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-14"><span class="nav-number">3.2.1.4.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-10"><span class="nav-number">3.2.1.4.2.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Missing"><span class="nav-number">3.2.1.5.</span> <span class="nav-text">Missing</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%9D%E6%83%B3-15"><span class="nav-number">3.2.1.5.1.</span> <span class="nav-text">思想</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-11"><span class="nav-number">3.2.1.5.2.</span> <span class="nav-text">使用方法</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">sy</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/iulay1007" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;iulay1007" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://iulay1007.github.io/2022/02/21/%E8%83%8C%E5%8E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="sy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SY">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          RxJava的流控
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 19:14:30 / 修改时间：19:30:34" itemprop="dateCreated datePublished" datetime="2022-02-21T19:14:30+08:00">2022-02-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="FlowControl-流控"><a href="#FlowControl-流控" class="headerlink" title="FlowControl(流控)"></a>FlowControl(流控)</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在RxJava中，遇到这样一种情况并不困难:Observable发出条目的速度比操作符或订阅者消费它们的速度要快。这就提出了一个问题，即如何处理这种不断增长的未消耗项目的积压。</p>
<a id="more"></a>

<p>例如，想象一下使用zip操作符将两个无限的observable压缩到一起，其中一个发出条目的频率是另一个的两倍。zip操作符的幼稚实现将不得不维护一个不断扩展的缓冲区，以保存由更快的Observable发出的项，最终与由更慢的Observable发出的项合并。这会导致RxJava占用大量的系统资源。</p>
<p>在RxJava中，您可以使用多种策略来实施流量控制和反压，以缓解快速生成的Observable遇到缓慢消耗的观察者时所造成的问题。本页面解释了其中一些策略，并向您展示了如何设计自己的Observable和Observable操作符来满足流量控制的请求</p>
<h2 id="Hot-and-cold-Observables-and-multicasted-Observables"><a href="#Hot-and-cold-Observables-and-multicasted-Observables" class="headerlink" title="Hot and cold Observables, and multicasted Observables"></a>Hot and cold Observables, and multicasted Observables</h2><p>cold Observable发射一个特定的项目序列，但当其Observer觉得方便时，可以开始发射该序列，并且以Observer希望的任何速率发射，而不会破坏序列的完整性。例如，如果您将静态Iterable转换为Observable，则该Observable将发出相同的项序列，无论稍后何时以何频率订阅或观察这些项。cold Observable的示例主要包括数据库查询、文件检索。</p>
<p>A hot Observable 在创建时开始生成要立即发射的项。Observer通常开始观察从序列中间的某个地方观察到的热点发出的项目序列，从在订阅建立之后可观察到的第一个项目开始。Observable以其自身的速度发射消息。对消息的接收情况取决于它的观察者能否跟上。A hot Observable示例主要包括鼠标和键盘事件、系统事件或股票价格</p>
<p>当a cold Observable是multicast时（当它被转换为ConnectableObservable并调用其connect（）方法时），它实际上变为a hot Observable，并且出于反压和流量控制的目的，它应该被视为a hot Observable。</p>
<p>Cold Observables 是一种理想的模型，它很少出现上游流速远大于下游消费速度的问题。Hot Observables通常不能很好地处理反压的情况。</p>
<p>所以Hot Observables更适合用下文讲述的onBackpressureBuffer或onBackpressureDrop操作符、节流、缓冲或窗口等来处理反压问题。</p>
<h1 id="Backpressure"><a href="#Backpressure" class="headerlink" title="Backpressure"></a>Backpressure</h1><p>Backpressure常被翻译为背压，但我觉得翻译成反压更加形象。</p>
<p>Backpressure可以理解为将消费者的压力反馈给生产者，这就是反压的含义。</p>
<h1 id="使用一些操作符代替反压"><a href="#使用一些操作符代替反压" class="headerlink" title="使用一些操作符代替反压"></a>使用一些操作符代替反压</h1><p>应对Observable生产过剩问题的第一道防线是使用一些普通的Observable操作符集合，将发出的项的数量减少到一个更易于管理的数量。</p>
<p>本节的例子将展示如何使用这些操作符来处理一个数据突发式的Observable，就像下面的图中所示的那样:</p>
<p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.bursty.png" alt="img"></p>
<p>通过微调这些操作符的参数，你可以确保一个慢速消耗的观察者不会被一个快速生成的Observable所淹没。</p>
<h3 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>像sample()或throttleLast()、throttleFirst()和throttleWithTimeout()或debounce()这样的操作符允许你调节Observable发出条目的速率。</p>
<p>它不是限制发送的数量，而是对发送的内容进行选择性接收，没有被接收的则丢弃。</p>
<blockquote>
<p>以下的bursty为自定义的Observable子类</p>
<p>所以这些操作符是用于限制Observable的发送，或者说限制对Observe的onNext方法的调用时机。</p>
</blockquote>
<h4 id="sample-or-throttleLast"><a href="#sample-or-throttleLast" class="headerlink" title="sample (or throttleLast)"></a>sample (or throttleLast)</h4><h5 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; burstySampled = bursty.sample(<span class="number">500</span>, TimeUnit.MILLISECONDS);</span><br></pre></td></tr></table></figure>

<h5 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h5><p>根据用户设置的时间间隔，隔一段时间去发送一次数据，所发送的数据为这个时间间隔内，最后发送的数据。所以无论这个时间间隔内产生了多少数据，观察者只接收到最后一个。</p>
<h5 id="图示："><a href="#图示：" class="headerlink" title="图示："></a>图示：</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.sample.png" alt="img"></p>
<p>下图中，用黄色和蓝色高光表示的是时间的间隔。在这段时间间隔内发送的最后一个数据即为观察者收到的数据。</p>
<p><img src="https://i.loli.net/2021/12/02/Bgmqktl45AzpcDQ.jpg" alt="IMG_0660(20211202-213543).PNG"></p>
<h4 id="throttleFirst"><a href="#throttleFirst" class="headerlink" title="throttleFirst"></a>throttleFirst</h4><h5 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; burstyThrottled = bursty.throttleFirst(<span class="number">500</span>, TimeUnit.MILLISECONDS);</span><br></pre></td></tr></table></figure>

<h5 id="思想-1"><a href="#思想-1" class="headerlink" title="思想"></a>思想</h5><p>与上面说的sample (or throttleLast)相反，它发送的是一段时间间隔内的第一个数据</p>
<h5 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.throttleFirst.png" alt="img"></p>
<h4 id="debounce-or-throttleWithTimeout"><a href="#debounce-or-throttleWithTimeout" class="headerlink" title="debounce (or throttleWithTimeout)"></a>debounce (or throttleWithTimeout)</h4><h5 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; burstyDebounced = bursty.debounce(<span class="number">10</span>, TimeUnit.MILLISECONDS);</span><br></pre></td></tr></table></figure>



<h5 id="思想-2"><a href="#思想-2" class="headerlink" title="思想"></a>思想</h5><p>只发出Observable中在指定的持续时间内后面没有其他item的那些消息</p>
<h5 id="图示-1"><a href="#图示-1" class="headerlink" title="图示"></a>图示</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.debounce.png" alt="img"></p>
<p>图中粉色高亮的部分，为大于设置的时间间隔的一段时间，在这段时间前的最后一个消息，即为要发送的消息。也就是说，在一定的时间间隔内，将要发送的消息后面没有其他消息。</p>
<p><img src="https://s2.loli.net/2021/12/04/EVwy6b9xDN7Qgnr.jpg" alt="IMG_0664(20211204-211630).PNG"></p>
<h3 id="打包发送"><a href="#打包发送" class="headerlink" title="打包发送"></a>打包发送</h3><h4 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h4><p>可以使用像buffer()或window()这样的操作符来从Observable中收集消息，然后将它们以集合(或Observable)的形式发出。然后，速度慢的使用者可以决定是只处理每个集合中的一个特定消息，还是处理这些消息的某些组合，还是根据需要安排对集合中的每个消息执行的工作。</p>
<h4 id="buffer"><a href="#buffer" class="headerlink" title="buffer"></a>buffer</h4><h5 id="使用方法-2"><a href="#使用方法-2" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;List&lt;Integer&gt;&gt; burstyBuffered = bursty.buffer(<span class="number">500</span>, TimeUnit.MILLISECONDS);</span><br></pre></td></tr></table></figure>



<h5 id="思想-3"><a href="#思想-3" class="headerlink" title="思想"></a>思想</h5><p>在有规律的时间间隔内，周期性地关闭并从突发的Observable中发送一个条目缓冲区的消息</p>
<blockquote>
<p>打包后的消息是用List存储起来</p>
</blockquote>
<h5 id="图示-2"><a href="#图示-2" class="headerlink" title="图示"></a>图示</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.buffer2.png" alt="img"></p>
<h5 id="进一步使用"><a href="#进一步使用" class="headerlink" title="进一步使用"></a>进一步使用</h5><h5 id="使用方法-3"><a href="#使用方法-3" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// we have to multicast the original bursty Observable so we can use it</span></span><br><span class="line"><span class="comment">// both as our source and as the source for our buffer closing selector:</span></span><br><span class="line">Observable&lt;Integer&gt; burstyMulticast = bursty.publish().refCount();</span><br><span class="line"><span class="comment">// burstyDebounced will be our buffer closing selector:</span></span><br><span class="line">Observable&lt;Integer&gt; burstyDebounced = burstMulticast.debounce(<span class="number">10</span>, TimeUnit.MILLISECONDS);</span><br><span class="line"><span class="comment">// and this, finally, is the Observable of buffers we&#x27;re interested in:</span></span><br><span class="line">Observable&lt;List&lt;Integer&gt;&gt; burstyBuffered = burstyMulticast.buffer(burstyDebounced);</span><br></pre></td></tr></table></figure>

<h5 id="思想-4"><a href="#思想-4" class="headerlink" title="思想"></a>思想</h5><p>将buffer和之前提到的debounce结合。</p>
<p>首先用户设置一段时间间隔。</p>
<p>在一个缓冲区后面若间隔了设置的时间依然没有消息，则将这个缓冲区的消息一起发送。</p>
<h5 id="图示-3"><a href="#图示-3" class="headerlink" title="图示"></a>图示</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.buffer1.png" alt="img"></p>
<h4 id="window"><a href="#window" class="headerlink" title="window"></a>window</h4><h5 id="思想-5"><a href="#思想-5" class="headerlink" title="思想"></a>思想</h5><p>将一段连续的消息打包成新的Observable发送。</p>
<p>一段消息的长度确定有两种方式：一段时间间隔内的所有消息，或者自行设置一段消息中共有多少消息。</p>
<h5 id="时间间隔内的消息图示"><a href="#时间间隔内的消息图示" class="headerlink" title="时间间隔内的消息图示"></a>时间间隔内的消息图示</h5><p>在用户设置的时间间隔内的所有消息被打包成一个新的Observable进行发送</p>
<p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.window1.png" alt="img"></p>
<h6 id="使用方法-4"><a href="#使用方法-4" class="headerlink" title="使用方法"></a>使用方法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Observable&lt;Integer&gt;&gt; burstyWindowed = bursty.window(<span class="number">500</span>, TimeUnit.MILLISECONDS);</span><br></pre></td></tr></table></figure>



<h5 id="自定义数量消息的图示"><a href="#自定义数量消息的图示" class="headerlink" title="自定义数量消息的图示"></a>自定义数量消息的图示</h5><p>自定义一次打包多少消息。在达到了设置的个数时，将会打包成新的Observable进行发送。</p>
<p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.window2.png" alt="img"></p>
<h6 id="使用方法-5"><a href="#使用方法-5" class="headerlink" title="使用方法"></a>使用方法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Observable&lt;Integer&gt;&gt; burstyWindowed = bursty.window(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>



<h3 id="Callstack-blocking"><a href="#Callstack-blocking" class="headerlink" title="Callstack blocking"></a>Callstack blocking</h3><p>如果Observable、所有对它进行操作的操作符以及订阅它的观察者都在同一个线程中操作，这将通过调用Callstack blocking（堆栈阻塞）有效地建立一种形式的背压。</p>
<p>即整个调用链处于同一个线程，不能用常用的线程切换方法切换线程。这属于同步的调用。</p>
<p>所以，Observable发送的消息会被<strong>观察者</strong>按顺序接收，若观察者在接收、处理消息时过慢，便会阻塞后面的消息。</p>
<p>这种情况其实和RxJava的主要功能相违背，属于很少见的情况。</p>
<h3 id="Subscriber如何建立响应式获取的反压策略"><a href="#Subscriber如何建立响应式获取的反压策略" class="headerlink" title="Subscriber如何建立响应式获取的反压策略"></a>Subscriber如何建立响应式获取的反压策略</h3><h4 id="思想-6"><a href="#思想-6" class="headerlink" title="思想"></a>思想</h4><p>当你用Subscriber订阅一个Observable时，你可以通过在Subscriber的onStart()方法中调用Subscriber.request(n)来请求响应式获取消息(n是你希望Observable在下一次request()调用之前发出的最大条目数)。</p>
<p>然后，在onNext()中处理这个消息(或这些消息)之后，您可以再次调用request()来指示Observable发出另一个消息(或多个消息)。</p>
<h4 id="使用方法-6"><a href="#使用方法-6" class="headerlink" title="使用方法"></a>使用方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">someObservable.subscribe(<span class="keyword">new</span> Subscriber&lt;t&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      request(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// gracefully handle sequence-complete</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// gracefully handle error</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(t n)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// do something with the emitted item &quot;n&quot;</span></span><br><span class="line">      <span class="comment">// request another item:</span></span><br><span class="line">      request(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p> request(Long.MAX_VALUE)，可以禁用响应式获取数据，并要求Observable以自己的速度发出条目。request(0)是一个合法调用，但没有效果。将小于0的值传递给request()将导致抛出异常。</p>
</blockquote>
<h4 id="Reactive-pull-backpressure-isn’t-magic"><a href="#Reactive-pull-backpressure-isn’t-magic" class="headerlink" title="Reactive pull backpressure isn’t magic"></a>Reactive pull backpressure isn’t magic</h4><h5 id="onBackpressureBuffer"><a href="#onBackpressureBuffer" class="headerlink" title="onBackpressureBuffer"></a>onBackpressureBuffer</h5><h6 id="思想-7"><a href="#思想-7" class="headerlink" title="思想"></a>思想</h6><p>维护Observable的所有发射的缓冲区，并根据Subscribers生成的requests将数据发送给它们。</p>
<h6 id="图示-4"><a href="#图示-4" class="headerlink" title="图示"></a>图示</h6><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.buffer.png" alt="img"></p>
<p>图中虚线部分是原先缓冲区的消息，每次Subscribers进行request(n)时，都会将缓冲区的前n个消息发送给Subscribers</p>
<p>所以在进行了五次request(1)后，原先缓冲区中前五个红色的消息就被发送给Subscribers了。</p>
<p><img src="https://s2.loli.net/2021/12/05/jmyGbUSJdN5fszP.jpg" alt="IMG_0668(20211205-193751).PNG"></p>
<blockquote>
<p>这个操作符的一个实验版本（RxJava 1.0中不可用）允许您设置缓冲区的容量；如果缓冲区溢出，应用此运算符将导致生成的Observable终止并出现错误</p>
</blockquote>
<h5 id="onBackpressureDrop"><a href="#onBackpressureDrop" class="headerlink" title="onBackpressureDrop"></a>onBackpressureDrop</h5><h6 id="思想-8"><a href="#思想-8" class="headerlink" title="思想"></a>思想</h6><p>在收到request(n)请求后，将这个请求之后产生的n条消息发送给Subscribers。其余的不属于这个范围的消息都将会被丢弃。</p>
<h6 id="图示-5"><a href="#图示-5" class="headerlink" title="图示"></a>图示</h6><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.drop.png" alt="img"></p>
<p>即将图中蓝色虚线之后的一条消息发送给Subscribers</p>
<p><img src="https://s2.loli.net/2021/12/05/RaCpeDNqQ3Z9wis.jpg" alt="IMG_0670(20211205-195733).PNG"></p>
<h5 id="onBackpressureLatest"><a href="#onBackpressureLatest" class="headerlink" title="onBackpressureLatest"></a>onBackpressureLatest</h5><h6 id="思想-9"><a href="#思想-9" class="headerlink" title="思想"></a>思想</h6><p>默认会缓存最新的n条数据，当接收到request(n)的时候，会把缓存的数据发送给Subscribers</p>
<h6 id="图示-6"><a href="#图示-6" class="headerlink" title="图示"></a>图示</h6><p><img src="http://zhangtielei.com/assets/photos_rxjava/backpressure/bp.obp.latest.png" alt="sample"></p>
<h5 id="onBackpressureBlock"><a href="#onBackpressureBlock" class="headerlink" title="onBackpressureBlock"></a>onBackpressureBlock</h5><h6 id="思想-10"><a href="#思想-10" class="headerlink" title="思想"></a>思想</h6><p>调用onBackpressureBlock（n）时传入的参数n，在Observable产生了n条未被Subscribers进行request的数据后，Observable所在的线程将被阻塞，直到Subscribersr进行request（x）的操作，此时Observable所在的线程将不被阻塞，Observable又可以生成x条数据。</p>
<p>简而言之，在Observable生成了n条未被消费的消息后，它所在的线程将被阻塞。</p>
<h6 id="图示-7"><a href="#图示-7" class="headerlink" title="图示"></a>图示</h6><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/images/operators/bp.obp.block.png" alt="img"></p>
<p>由于这里onBackpressureBlock传入的参数是2，所以Observable在生成了2条未被消费的消息后，所在线程将被阻塞。</p>
<p>图中，刚开始生成了2个红色的1和2，所以Observable所在线程被block。直到Subscribers进行了request（1），获得了两个数据的第一个，即红色的1，所以Observable中只有红色的2，所在线程被unblock，之后又生产了一个橙色的1，现有红色的2和橙色的1，直到Subscribers进行了request（1）后进行如上重复操作。<img src="https://s2.loli.net/2021/12/05/Wo9caksqSJGOxTz.jpg" alt="IMG_0676(20211205-205825).PNG"></p>
<blockquote>
<p>可以理解为堵住了接收者的接收入口</p>
</blockquote>
<h2 id="Flowable"><a href="#Flowable" class="headerlink" title="Flowable"></a>Flowable</h2><h3 id="Observable-与-Flowable"><a href="#Observable-与-Flowable" class="headerlink" title="Observable 与 Flowable"></a>Observable 与 Flowable</h3><p>在RxJava的前一个版本中，只有一个基类用于处理反压和非反压的情况——Observable</p>
<p>而RxJava 2引入了Flowable来处理反压的情况。</p>
<h3 id="Flowable的创建"><a href="#Flowable的创建" class="headerlink" title="Flowable的创建"></a>Flowable的创建</h3><h4 id="简单的Flowable"><a href="#简单的Flowable" class="headerlink" title="简单的Flowable"></a>简单的Flowable</h4><p>我们可以像创建Observable一样，使用just()方法创建一个Flowable:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flowable&lt;Integer&gt; integerFlowable = Flowable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>尽管just()的使用非常简单，但从静态数据创建一个Flowable并不常见，它仅仅用于测试。</p>
<h4 id="通过Observable创建Flowable"><a href="#通过Observable创建Flowable" class="headerlink" title="通过Observable创建Flowable"></a>通过Observable创建Flowable</h4><p>当我们有一个Observable时，我们可以很容易地使用toFlowable()方法将其转换为Flowable:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; integerObservable = Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">Flowable&lt;Integer&gt; integerFlowable = integerObservable</span><br><span class="line">  .toFlowable(BackpressureStrategy.BUFFER);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里的BackpressureStrategy将会在下文讲述</p>
</blockquote>
<h4 id="通过FlowableOnSubscribe创建Flowable"><a href="#通过FlowableOnSubscribe创建Flowable" class="headerlink" title="通过FlowableOnSubscribe创建Flowable"></a>通过FlowableOnSubscribe创建Flowable</h4><p>RxJava 2引入了一个接口FlowableOnSubscribe，它表示一个在用户订阅后开始发出事件的Flowable。</p>
<p>因此，所有客户端都将收到相同的事件集，这使得FlowableOnSubscribe反压更加安全。</p>
<p>当我们有了FlowableOnSubscribe，我们可以使用它来创建Flowable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FlowableOnSubscribe&lt;Integer&gt; flowableOnSubscribe</span><br><span class="line"> = flowable -&gt; flowable.onNext(<span class="number">1</span>);</span><br><span class="line">Flowable&lt;Integer&gt; integerFlowable = Flowable</span><br><span class="line">  .create(flowableOnSubscribe, BackpressureStrategy.BUFFER);</span><br></pre></td></tr></table></figure>



<p><strong><em>其他的创建Flowable方法这里就不一一介绍了</em></strong></p>
<h2 id="Flowable的Backpressure策略"><a href="#Flowable的Backpressure策略" class="headerlink" title="Flowable的Backpressure策略"></a>Flowable的Backpressure策略</h2><p>在RxJava 2.x中，Observable不再支持Backpressure，而是改用Flowable来专门支持Backpressure。上面提到的四种operator（<strong>onBackpressureBuffer、onBackpressureDrop、onBackpressureLatest、onBackpressureBlock</strong>）的前三种分别对应Flowable的三种Backpressure策略：</p>
<ul>
<li>BackpressureStrategy.BUFFER</li>
<li>BackpressureStrategy.DROP</li>
<li>BackpressureStrategy.LATEST</li>
</ul>
<h3 id="BackpressureStrategy"><a href="#BackpressureStrategy" class="headerlink" title="BackpressureStrategy"></a>BackpressureStrategy</h3><p>BackpressureStrategy是一个枚举类型，它定义了Flowable的反压行为。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents the options for applying backpressure to a source sequence.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">BackpressureStrategy</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * OnNext events are written without any buffering or dropping.</span></span><br><span class="line"><span class="comment">     * Downstream has to deal with any overflow.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Useful when one applies one of the custom-parameter onBackpressureXXX operators.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MISSING,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Signals a MissingBackpressureException in case the downstream can&#x27;t keep up.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ERROR,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Buffers &lt;em&gt;all&lt;/em&gt; onNext values until the downstream consumes it.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BUFFER,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Drops the most recent onNext value if the downstream can&#x27;t keep up.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DROP,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Keeps only the latest onNext value, overwriting any previous value if the</span></span><br><span class="line"><span class="comment">     * downstream can&#x27;t keep up.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    LATEST</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h4><h5 id="思想-11"><a href="#思想-11" class="headerlink" title="思想"></a>思想</h5><p>如果我们使用该反压策略，source将缓冲所有事件，直到订阅者可以使用它们。也就是缓冲所有onNext()的值，直到下游使用它。</p>
<h5 id="使用方法-7"><a href="#使用方法-7" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">thenAllValuesAreBufferedAndReceived</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List testList = IntStream.range(<span class="number">0</span>, <span class="number">100000</span>)</span><br><span class="line">      .boxed()</span><br><span class="line">      .collect(Collectors.toList());</span><br><span class="line"> </span><br><span class="line">    Observable observable = Observable.fromIterable(testList);</span><br><span class="line">    TestSubscriber&lt;Integer&gt; testSubscriber = observable</span><br><span class="line">      .toFlowable(BackpressureStrategy.BUFFER)</span><br><span class="line">      .observeOn(Schedulers.computation()).test();</span><br><span class="line"></span><br><span class="line">    testSubscriber.awaitTerminalEvent();</span><br><span class="line"></span><br><span class="line">    List&lt;Integer&gt; receivedInts = testSubscriber.getEvents()</span><br><span class="line">      .get(<span class="number">0</span>)</span><br><span class="line">      .stream()</span><br><span class="line">      .mapToInt(object -&gt; (<span class="keyword">int</span>) object)</span><br><span class="line">      .boxed()</span><br><span class="line">      .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">    assertEquals(testList, receivedInts);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它类似于在Flowable上调用onBackpressureBuffer()方法，但它不允许指定缓冲区大小或onOverflow。</p>
<h4 id="Drop"><a href="#Drop" class="headerlink" title="Drop"></a>Drop</h4><h5 id="思想-12"><a href="#思想-12" class="headerlink" title="思想"></a>思想</h5><p>我们可以用以丢弃不能消费的onNext()值，而不是缓冲它们。</p>
<p>这类似于在Flowable上使用onBackpressureDrop():</p>
<h5 id="使用方法-8"><a href="#使用方法-8" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenDropStrategyUsed_thenOnBackpressureDropped</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    Observable observable = Observable.fromIterable(testList);</span><br><span class="line">    TestSubscriber&lt;Integer&gt; testSubscriber = observable</span><br><span class="line">      .toFlowable(BackpressureStrategy.DROP)</span><br><span class="line">      .observeOn(Schedulers.computation())</span><br><span class="line">      .test();</span><br><span class="line">    testSubscriber.awaitTerminalEvent();</span><br><span class="line">    List&lt;Integer&gt; receivedInts = testSubscriber.getEvents()</span><br><span class="line">      .get(<span class="number">0</span>)</span><br><span class="line">      .stream()</span><br><span class="line">      .mapToInt(object -&gt; (<span class="keyword">int</span>) object)</span><br><span class="line">      .boxed()</span><br><span class="line">      .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">    assertThat(receivedInts.size() &lt; testList.size());</span><br><span class="line">    assertThat(!receivedInts.contains(<span class="number">100000</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h4 id="Latest"><a href="#Latest" class="headerlink" title="Latest"></a>Latest</h4><h5 id="思想-13"><a href="#思想-13" class="headerlink" title="思想"></a>思想</h5><p>使将强制source仅保留最新的onNext()值。因此如果消费者不能跟上，将覆盖以前的任何值</p>
<h5 id="使用方法-9"><a href="#使用方法-9" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenLatestStrategyUsed_thenTheLastElementReceived</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    Observable observable = Observable.fromIterable(testList);</span><br><span class="line">    TestSubscriber&lt;Integer&gt; testSubscriber = observable</span><br><span class="line">      .toFlowable(BackpressureStrategy.LATEST)</span><br><span class="line">      .observeOn(Schedulers.computation())</span><br><span class="line">      .test();</span><br><span class="line"></span><br><span class="line">    testSubscriber.awaitTerminalEvent();</span><br><span class="line">    List&lt;Integer&gt; receivedInts = testSubscriber.getEvents()</span><br><span class="line">      .get(<span class="number">0</span>)</span><br><span class="line">      .stream()</span><br><span class="line">      .mapToInt(object -&gt; (<span class="keyword">int</span>) object)</span><br><span class="line">      .boxed()</span><br><span class="line">      .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">    assertThat(receivedInts.size() &lt; testList.size());</span><br><span class="line">    assertThat(receivedInts.contains(<span class="number">100000</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>BackpressureStrategy.LATEST和BackpressureStrategy.DROP看起来非常相似。<br>但是，BackPressureStragey.LATEST将覆盖订阅者无法处理的元素，并仅保留最新的元素。<br>BackpressureStragy.DROP将丢弃无法处理的元素。这意味着不一定会发射最新的元素。</p>
<h4 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h4><h5 id="思想-14"><a href="#思想-14" class="headerlink" title="思想"></a>思想</h5><p>当我们使用backpressureStragy.ERROR时，表示我们不希望出现反压。因此，如果消费者无法跟上source，则应抛出MissingBackpressureException</p>
<h5 id="使用方法-10"><a href="#使用方法-10" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenErrorStrategyUsed_thenExceptionIsThrown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable observable = Observable.range(<span class="number">1</span>, <span class="number">100000</span>);</span><br><span class="line">    TestSubscriber subscriber = observable</span><br><span class="line">      .toFlowable(BackpressureStrategy.ERROR)</span><br><span class="line">      .observeOn(Schedulers.computation())</span><br><span class="line">      .test();</span><br><span class="line"></span><br><span class="line">    subscriber.awaitTerminalEvent();</span><br><span class="line">    subscriber.assertError(MissingBackpressureException.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Missing"><a href="#Missing" class="headerlink" title="Missing"></a>Missing</h4><h5 id="思想-15"><a href="#思想-15" class="headerlink" title="思想"></a>思想</h5><p>source在不丢弃或缓冲的情况下发送消息。</p>
<p>在这种情况下，下游必须处理溢出</p>
<h5 id="使用方法-11"><a href="#使用方法-11" class="headerlink" title="使用方法"></a>使用方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenMissingStrategyUsed_thenException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable observable = Observable.range(<span class="number">1</span>, <span class="number">100000</span>);</span><br><span class="line">    TestSubscriber subscriber = observable</span><br><span class="line">      .toFlowable(BackpressureStrategy.MISSING)</span><br><span class="line">      .observeOn(Schedulers.computation())</span><br><span class="line">      .test();</span><br><span class="line">    subscriber.awaitTerminalEvent();</span><br><span class="line">    subscriber.assertError(MissingBackpressureException.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>我们的测试中，我们正在为ERROR和MISSING策略排除MissingbackpressureException。因为当source的内部缓冲区溢出时，它们都会抛出此类异常。然而它们有不同的目的。</p>
<p>当我们根本不期望出现反压，并且希望源程序在发生反压时抛出异常时，我们应该使用ERROR策略。</p>
<p>如果我们不想在创建Flowable时指定默认行为，可以使用MISSING策略。我们之后会用反压运算符来给它的行为赋值。</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/11/19/HashMap/" rel="prev" title="HashMap">
                  <i class="fa fa-chevron-left"></i> HashMap
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/02/21/Retrofit%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="next" title="Retrofit中的设计模式">
                  Retrofit中的设计模式 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sy</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/local-search.js"></script>















  








  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
